<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>bijux</title>
  <meta name="description" content="Engineering-first projects and coursebooks for correctness, determinism, and reproducibility." />
  <meta property="og:title" content="bijux" />
  <meta property="og:description" content="Engineering-first projects and coursebooks for correctness, determinism, and reproducibility." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bijux.github.io/" />
  <meta property="og:image" content="https://bijux.github.io/assets/bijux_logo_hq.png" />
  <link rel="icon" type="image/png" href="./assets/bijux_icon.png" />
  <link rel="apple-touch-icon" href="./assets/bijux_icon.png" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⬡</text></svg>" />
  <style>
    :root {
      --bg: #fbfbfc;
      --surface: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --border: #e2e8f0;
      --shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
      --shadow-hover: 0 14px 40px rgba(2, 6, 23, 0.10);
      --accent: #2563eb;
      --radius: 14px;
      --focus: 0 0 0 3px rgba(37, 99, 235, 0.25);
      --section-tint: rgba(2, 6, 23, 0.02);
    }
    :root[data-theme="dark"] {
      --bg: #0b1220;
      --surface: #0f172a;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --border: rgba(148, 163, 184, 0.22);
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      --shadow-hover: 0 14px 40px rgba(0, 0, 0, 0.45);
      --accent: #60a5fa;
      --focus: 0 0 0 3px rgba(96, 165, 250, 0.22);
      --section-tint: rgba(148, 163, 184, 0.04);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      background: var(--bg);
    }
    .skip {
      position: absolute;
      left: -999px;
      top: 8px;
      padding: 10px 12px;
      border-radius: 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      color: var(--text);
      z-index: 10;
    }
    .skip:focus { left: 12px; outline: none; box-shadow: var(--shadow-hover), var(--focus); }
    .wrap {
      max-width: 920px;
      margin: 0 auto;
      padding: 56px 20px 64px;
    }
    header {
      position: relative;
      text-align: center;
      margin-bottom: 44px;
    }
    .brand {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      margin-top: 4px;
    }
    .brand img {
      display: block;
      width: min(440px, 80vw);
      height: auto;
      border-radius: 12px;
      box-shadow: var(--shadow);
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 10px;
    }
    h1 {
      margin: 0;
      font-size: clamp(2rem, 4vw, 2.8rem);
      font-weight: 650;
      letter-spacing: -0.02em;
    }
    header p {
      margin: 10px auto 0;
      max-width: 66ch;
      color: var(--muted);
      font-size: 1.02rem;
    }
    .topbar {
      position: absolute;
      right: 0;
      top: 0;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .iconbtn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: var(--surface);
      color: var(--text);
      box-shadow: var(--shadow);
      cursor: pointer;
      user-select: none;
      font-size: 0.92rem;
      text-decoration: none;
    }
    .iconbtn:hover { box-shadow: var(--shadow-hover); }
    .iconbtn:focus-visible { outline: none; box-shadow: var(--shadow-hover), var(--focus); }
    .icon { width: 16px; height: 16px; display: inline-block; }
    main { margin-top: 28px; }
    section { margin-top: 64px; margin-bottom: 64px; }
    section.projects {
      background: var(--section-tint);
      padding: 20px 0;
      margin-top: 80px;
    }
    .section-title {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin: 0 0 14px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }
    .section-title h2, .section-title h3 {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .section-guide {
      margin: 0 0 18px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .section-intro {
      margin: 0 0 24px;
      font-size: 1rem;
    }
    .project-rows, .book-rows {
      display: flex;
      flex-direction: column;
      gap: 40px;
    }
    .project-row, .book-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    .full-width {
      grid-column: 1 / -1;
    }
    @media (max-width: 840px) {
      .project-row, .book-row {
        grid-template-columns: 1fr;
      }
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow);
      transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 220px;
    }
    .card.cli {
      padding: 24px 24px 20px;
      margin-bottom: 24px;
      min-height: 240px;
    }
    .card:not(.cli) {
      gap: 6px;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      border-color: rgba(37, 99, 235, 0.25);
    }
    :root[data-theme="dark"] .card:hover {
      border-color: rgba(96, 165, 250, 0.28);
    }
    .card h3 {
      margin: 0;
      font-size: 1.15rem;
      font-weight: 700;
      letter-spacing: -0.01em;
    }
    .card.cli h3 {
      font-size: 1.25rem;
    }
    .card p {
      margin: 0;
      color: var(--text);
      font-size: 0.96rem;
    }
    .card p:nth-of-type(2) {
      color: var(--muted);
      padding-left: 12px;
      font-size: 0.94rem;
    }
    .card p:nth-of-type(3) {
      color: var(--muted);
      font-style: italic;
    }
    .used-when {
      margin-top: 12px;
      font-size: 0.91rem;
      font-family: monospace;
      color: var(--muted);
    }
    .learning-outcome {
      font-weight: 600;
      position: relative;
      padding-left: 20px;
    }
    .learning-outcome::before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--muted);
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    a:focus-visible { outline: none; box-shadow: var(--focus); border-radius: 6px; }
    .meta {
      margin-top: auto;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      color: var(--muted);
      font-size: 0.9rem;
      align-items: center;
      justify-content: space-between;
    }
    .pills {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 8px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: var(--surface);
      font-size: 0.85rem;
      color: var(--muted);
    }
    .links {
      display: inline-flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }
    .links a {
      font-size: 0.92rem;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: var(--surface);
      box-shadow: var(--shadow);
    }
    .links a:last-child {
      font-size: 0.88rem;
      color: var(--muted);
    }
    .links a:hover { box-shadow: var(--shadow-hover); text-decoration: none; }
    .hero {
      margin: 0 auto 80px;
      max-width: 66ch;
      text-align: center;
    }
    .hero-thesis {
      margin: 0 0 10px;
      font-size: 1.4rem;
      font-weight: 700;
    }
    .hero-support {
      margin: 0 0 20px;
      font-size: 1.05rem;
      color: var(--text);
    }
    .hero .exclusion {
      margin-top: 12px;
      font-size: 0.98rem;
      color: var(--muted);
    }
    footer {
      margin-top: 64px;
      text-align: center;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .signature {
      margin-top: 12px;
      font-size: 1rem;
      font-weight: 600;
      color: var(--text);
    }
    .cred-anchor {
      margin-top: 8px;
      font-size: 0.88rem;
    }
  </style>
</head>
<body>
  <a class="skip" href="#content">Skip to content</a>
  <div class="wrap">
    <header>
      <div class="topbar">
        <button class="iconbtn" id="themeToggle" type="button" aria-label="Toggle theme">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-16h1v3h-1V2Zm0 17h1v3h-1v-3ZM2 11h3v1H2v-1Zm17 0h3v1h-3v-1ZM4.22 4.22l2.12 2.12-.71.71L3.51 4.93l.71-.71Zm14.14 14.14 2.12 2.12-.71.71-2.12-2.12.71-.71ZM19.78 4.22l.71.71-2.12 2.12-.71-.71 2.12-2.12ZM5.64 17.66l.71.71-2.12 2.12-.71-.71 2.12-2.12Z"/>
          </svg>
          <span id="themeLabel">Auto</span>
        </button>
      </div>
      <div class="brand" aria-label="bijux brand">
        <img src="./assets/bijux_logo_hq.png" alt="bijux logo" />
      </div>
      <h1>bijux</h1>
      <p>Engineering-first projects and coursebooks—built for correctness, determinism, and clarity.</p>
    </header>
    <div class="hero">
      <p class="hero-thesis">Deterministic systems for verifiable computation and reproducible reasoning.</p>
      <p class="hero-support">Explicit inputs. Bounded nondeterminism. Artifact-backed provenance. Auditable behavior.</p>
      <p class="exclusion">Not for rapid prototyping or heuristic automation.</p>
    </div>
    <main id="content">
      <section aria-labelledby="about">
        <div class="section-title">
          <h2 id="about">About</h2>
        </div>
        <p class="section-guide">Positioning & rationale</p>
        <p>
          Contemporary software practices prioritize rapid iteration and flexible automation, sacrificing verifiable correctness and reproducible behavior.
        </p>
        <p>
          bijux rejects these norms. It forbids silent degradation, hidden nondeterminism, and undefined boundaries, treating them as fundamental defects rather than acceptable trade-offs.
        </p>
        <p>
          Instead, bijux builds tools and coursebooks that enforce explicit contracts, artifact-backed provenance, and deterministic execution—delivering systems that remain explainable, auditable, and stable over time.
        </p>
        <p>
          bijux serves engineers constructing systems where correctness outweighs convenience, such as in regulated industries, scientific computing, or long-lived infrastructure. It equips those who demand replayable behavior and auditable decisions to build with precision. bijux does not serve those prioritizing rapid prototyping, exploratory scripting, or heuristic flexibility. If opaque automation or silent recovery is acceptable, bijux will not align with your needs.
        </p>
        <p>These principles underpin all bijux systems:</p>
        <h3>Principles</h3>
        <ul>
          <li><strong>Determinism over convenience</strong> — Identical inputs yield identical outputs; nondeterminism is explicit and bounded. No hidden randomness; all sources must be injectable.</li>
          <li><strong>Explicit contracts</strong> — Every boundary is validated at construction; undefined behavior is treated as a bug. All interfaces are checked before execution.</li>
          <li><strong>Sharp failure modes</strong> — Failures are immediate, loud, and local; no silent degradation or implicit fallbacks.</li>
          <li><strong>Verifiable behavior</strong> — Every output is traceable to concrete artifacts; provenance and replayability are first-class requirements.</li>
        </ul>
      </section>
      <section class="projects" aria-labelledby="projects">
        <div class="section-title">
          <h2 id="projects">Projects</h2>
        </div>
        <p class="section-guide">Production-grade systems</p>
        <p class="section-intro">These projects deliver tools that enforce determinism and verifiability in engineering workflows.</p>
        <div class="project-rows">
          <div class="project-row">
            <article class="card cli full-width">
              <h3><a href="https://bijux.github.io/bijux-cli/">bijux-cli</a></h3>
              <p>
                bijux-cli enforces deterministic command resolution, explicit plugin composition, dependency injection, and an interactive REPL, making command-line interfaces stable and testable at scale.
              </p>
              <p>
                It exists because conventional CLI frameworks accumulate implicit state and fragile loading mechanisms that degrade under complexity, leading to untestable systems in production environments.
              </p>
              <p>
                It forbids runtime discovery in favor of construction-time guarantees; this is not a convenience layer for quick scripting.
              </p>
              <p class="used-when">Used when CLI behavior must be replayable months later.</p>
              <div class="meta">
                <div class="pills" aria-label="bijux-cli tags">
                  <span class="pill">Deterministic Resolution</span>
                  <span class="pill">Explicit Composition</span>
                  <span class="pill">Dependency Injection</span>
                  <span class="pill">Execution Contracts</span>
                </div>
                <div class="links" aria-label="bijux-cli links">
                  <a href="https://bijux.github.io/bijux-cli/">Documentation</a>
                  <a href="https://github.com/bijux/bijux-cli">Source Code</a>
                  <a href="https://pypi.org/project/bijux-cli/">PyPI</a>
                </div>
              </div>
            </article>
          </div>
          <div class="project-row">
            <article class="card">
              <h3><a href="https://bijux.github.io/bijux-agent/">bijux-agent</a></h3>
              <p>
                bijux-agent models agents as deterministic state machines with artifact-backed actions and comprehensive trace recording, ensuring every execution is auditable and replayable.
              </p>
              <p>
                It exists to address agent frameworks that permit unlogged side effects and persistent state, resulting in outputs that cannot be reliably debugged or reproduced in critical applications.
              </p>
              <p>
                It rejects untraced operations to prioritize verifiability; this is not an exploratory orchestration tool.
              </p>
              <p class="used-when">Used when agent decisions require full audit trails for compliance.</p>
              <div class="meta">
                <div class="pills" aria-label="bijux-agent tags">
                  <span class="pill">State Machines</span>
                  <span class="pill">Artifact Actions</span>
                  <span class="pill">Trace Provenance</span>
                  <span class="pill">Deterministic Execution</span>
                </div>
                <div class="links" aria-label="bijux-agent links">
                  <a href="https://bijux.github.io/bijux-agent/">Documentation</a>
                  <a href="https://github.com/bijux/bijux-agent">Source Code</a>
                  <a href="https://pypi.org/project/bijux-agent/">PyPI</a>
                </div>
              </div>
            </article>
            <article class="card">
              <h3><a href="https://bijux.github.io/bijux-rag/">bijux-rag</a></h3>
              <p>
                bijux-rag constructs retrieval pipelines using functional flows, explicit boundaries, and provenance tracking, delivering controllable and verifiable results without implicit state.
              </p>
              <p>
                It exists because standard RAG pipelines conceal prompt state and produce unreplayable retrieval, leading to hallucinations without traceable origins in deployed systems.
              </p>
              <p>
                It forbids mutable transformations to maintain auditability; this is not a heuristic search wrapper.
              </p>
              <p class="used-when">Used when retrieval must be immutable and traceable to prevent errors in production.</p>
              <div class="meta">
                <div class="pills" aria-label="bijux-rag tags">
                  <span class="pill">Functional Pipelines</span>
                  <span class="pill">Provenance Tracking</span>
                  <span class="pill">Immutable Dataflow</span>
                  <span class="pill">Retrieval Contracts</span>
                </div>
                <div class="links" aria-label="bijux-rag links">
                  <a href="https://bijux.github.io/bijux-rag/">Documentation</a>
                  <a href="https://github.com/bijux/bijux-rag">Source Code</a>
                  <a href="https://pypi.org/project/bijux-rag/">PyPI</a>
                </div>
              </div>
            </article>
          </div>
          <div class="project-row">
            <article class="card">
              <h3><a href="https://bijux.github.io/bijux-rar/">bijux-rar</a></h3>
              <p>
                bijux-rar formalizes reasoning as deterministic proof trees with artifact-backed evidence, ensuring conclusions are stable, auditable, and grounded in explicit premises.
              </p>
              <p>
                It exists to counter reasoning systems that tolerate unverifiable outputs and hidden dependencies, causing inconsistent results in applications requiring evidentiary rigor.
              </p>
              <p>
                It rejects ungrounded plausibility for verifiable structure; this is not a probabilistic inference engine.
              </p>
              <p class="used-when">Used when reasoning outputs demand evidentiary proof for regulatory scrutiny.</p>
              <div class="meta">
                <div class="pills" aria-label="bijux-rar tags">
                  <span class="pill">Proof Trees</span>
                  <span class="pill">Artifact Evidence</span>
                  <span class="pill">Deterministic Reasoning</span>
                  <span class="pill">Verifiable Conclusions</span>
                </div>
                <div class="links" aria-label="bijux-rar links">
                  <a href="https://bijux.github.io/bijux-rar/">Documentation</a>
                  <a href="https://github.com/bijux/bijux-rar">Source Code</a>
                  <a href="https://pypi.org/project/bijux-rar/">PyPI</a>
                </div>
              </div>
            </article>
            <article class="card">
              <h3><a href="https://bijux.github.io/bijux-vex/">bijux-vex</a></h3>
              <p>
                bijux-vex executes vector search under explicit contracts with bounded approximation, providing replayable, parameterized results with comprehensive provenance.
              </p>
              <p>
                It exists because vector databases hide nondeterminism and unstable rankings, resulting in unreplayable queries that undermine trust in search-dependent systems.
              </p>
              <p>
                It forbids unbounded nondeterminism to guarantee reproducibility; this is not an approximate query optimizer.
              </p>
              <p class="used-when">Used when vector queries must remain stable across executions for consistency.</p>
              <div class="meta">
                <div class="pills" aria-label="bijux-vex tags">
                  <span class="pill">Execution Contracts</span>
                  <span class="pill">Vector Search</span>
                  <span class="pill">Bounded Approximation</span>
                  <span class="pill">Replayability</span>
                </div>
                <div class="links" aria-label="bijux-vex links">
                  <a href="https://bijux.github.io/bijux-vex/">Documentation</a>
                  <a href="https://github.com/bijux/bijux-vex">Source Code</a>
                  <a href="https://pypi.org/project/bijux-vex/">PyPI</a>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>
      <section aria-labelledby="coursebooks">
        <div class="section-title">
          <h2 id="coursebooks">Coursebooks</h2>
        </div>
        <p class="section-guide">Teaching & pedagogy</p>
        <p class="section-intro">These coursebooks provide rigorous instruction in methods for engineering deterministic software.</p>
        <div class="book-rows">
          <div class="book-row">
            <article class="card">
              <h3><a href="https://bijux.github.io/python-functional-programming/">Python Functional Programming</a></h3>
              <p>
                This coursebook guides engineers through designing Python systems with purity, immutability, monadic flows, and property-based testing, anchored in a functional RAG pipeline implementation.
              </p>
              <p>
                It exists to address Python's mutable defaults and side-effect tolerance, which foster nondeterministic code in production.
              </p>
              <p>
                It forbids imperative shortcuts to enforce verifiable structures.
              </p>
              <p class="learning-outcome">By the end, the reader can construct verifiable Python systems free from implicit state.</p>
              <div class="meta">
                <div class="pills">
                  <span class="pill">Functional Design</span>
                  <span class="pill">Immutability</span>
                  <span class="pill">Effect Isolation</span>
                  <span class="pill">Property-Based Testing</span>
                </div>
                <div class="links">
                  <a href="https://bijux.github.io/python-functional-programming/">Read</a>
                  <a href="https://github.com/bijux/python-functional-programming">Source Code</a>
                </div>
              </div>
            </article>
            <article class="card">
              <h3><a href="https://bijux.github.io/python-meta-programming/">Python Meta-Programming</a></h3>
              <p>
                This coursebook presents a rigorous model of Python's runtime, decomposing object creation, class construction, attribute resolution, and invocation into explicit phases.
              </p>
              <p>
                It exists because Python's dynamic features often lead to opaque runtime surprises in complex systems.
              </p>
              <p>
                It rejects guesswork for traceable models.
              </p>
              <p class="learning-outcome">By the end, the reader can predict and control Python's metaprogramming behavior with precision.</p>
              <div class="meta">
                <div class="pills">
                  <span class="pill">Runtime Model</span>
                  <span class="pill">Object Construction</span>
                  <span class="pill">Attribute Resolution</span>
                  <span class="pill">Metaclasses</span>
                </div>
                <div class="links">
                  <a href="https://bijux.github.io/python-meta-programming/">Read</a>
                  <a href="https://github.com/bijux/python-meta-programming">Source Code</a>
                </div>
              </div>
            </article>
          </div>
          <div class="book-row">
            <article class="card">
              <h3><a href="https://bijux.github.io/deep-dive-snakemake/">Deep Dive Snakemake</a></h3>
              <p>
                This coursebook equips engineers to construct reproducible pipelines with explicit rules, artifact caching, provenance tracking, and deterministic execution in Snakemake.
              </p>
              <p>
                It exists to counter ad-hoc workflows that fail reproducibility across environments.
              </p>
              <p>
                It forbids uncontrolled side effects for rigorous invariance.
              </p>
              <p class="learning-outcome">By the end, the reader can build invariant workflows that enforce rigorous determinism.</p>
              <div class="meta">
                <div class="pills">
                  <span class="pill">Workflow Semantics</span>
                  <span class="pill">Provenance</span>
                  <span class="pill">Artifact Caching</span>
                  <span class="pill">Deterministic Execution</span>
                </div>
                <div class="links">
                  <a href="https://bijux.github.io/deep-dive-snakemake/">Read</a>
                  <a href="https://github.com/bijux/deep-dive-snakemake">Source Code</a>
                </div>
              </div>
            </article>
            <article class="card">
              <h3><a href="https://bijux.github.io/deep-dive-make/">Deep Dive Make</a></h3>
              <p>
                This coursebook provides tools for analyzing large GNU Make systems, emphasizing truthful dependency graphs, atomic publication, parallel safety, and self-checking invariants.
              </p>
              <p>
                It exists because Make-based builds often hide cyclic dependencies and race conditions in scale.
              </p>
              <p>
                It rejects sequential assumptions for parallel correctness.
              </p>
              <p class="learning-outcome">By the end, the reader can diagnose and enforce correctness in complex build systems.</p>
              <div class="meta">
                <div class="pills">
                  <span class="pill">Build Graphs</span>
                  <span class="pill">Dependency Truth</span>
                  <span class="pill">Parallel Safety</span>
                  <span class="pill">Atomic Publication</span>
                </div>
                <div class="links">
                  <a href="https://bijux.github.io/deep-dive-make/">Read</a>
                  <a href="https://github.com/bijux/deep-dive-make">Source Code</a>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>
    </main>
    <footer>
      © <span id="y"></span> bijux · <a href="https://github.com/bijux">GitHub</a>
      <div class="signature">
        If a system’s behavior cannot be explained without running it, it is unfinished.
      </div>
      <div class="cred-anchor">
        Used in research and long-lived production systems.
      </div>
      <script>document.getElementById("y").textContent = new Date().getFullYear();</script>
    </footer>
  </div>
  <script>
    (function () {
      const root = document.documentElement;
      const btn = document.getElementById("themeToggle");
      const label = document.getElementById("themeLabel");
      const prefersDark = () => window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      const mq = window.matchMedia("(prefers-color-scheme: dark)");
      let listenerAdded = false;
      const getStored = () => localStorage.getItem("theme");
      const setStored = (v) => localStorage.setItem("theme", v);
      const themes = ["light", "dark", "auto"];
      let currentTheme = getStored() || "auto";
      const applyTheme = (theme) => {
        currentTheme = theme;
        if (theme === "auto") {
          const preferred = prefersDark() ? "dark" : "light";
          root.setAttribute("data-theme", preferred);
          label.textContent = "Auto";
          if (!listenerAdded) {
            mq.addEventListener("change", handlePrefersChange);
            listenerAdded = true;
          }
        } else {
          root.setAttribute("data-theme", theme);
          label.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
          if (listenerAdded) {
            mq.removeEventListener("change", handlePrefersChange);
            listenerAdded = false;
          }
        }
      };
      const handlePrefersChange = () => {
        if (currentTheme === "auto") {
          applyTheme("auto");
        }
      };
      const cycleTheme = () => {
        const next = currentTheme === "light" ? "dark" : currentTheme === "dark" ? "auto" : "light";
        applyTheme(next);
        setStored(next);
      };
      applyTheme(currentTheme);
      btn.addEventListener("click", cycleTheme);
    })();
  </script>
</body>
</html>
